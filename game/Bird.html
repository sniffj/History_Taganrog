<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bird</title>
    <style>
        canvas{
            border:2px solid rgb(50, 150, 150)
        }
        </style>
</head>
<body>
    <canvas width="288" height="512" id="canvas"></canvas>
    <script>
        ctx = canvas.getContext('2d')
        let bird = new Image();
        bird.src = 'flappy_bird_bird.png';
        let bg = new Image();
        bg.src = 'flappy_bird_bg.png';
        let fg = new Image();
        fg.src = 'flappy_bird_fg.png';
        let pb = new Image();
        pb.src = 'flappy_bird_pipeBottom.png';
        let pu = new Image();
        pu.src = 'flappy_bird_pipeUp.png';
        let x = 10;
        let y = 150;
        pole_x = 288;
        h = canvas.height
        w = canvas.width
        class Pipe {
            x;
            y;
            constructor(){
                this.x = w
                this.y = Math.floor(Math.random() * (0 - -200 + 1)) + -200;
            }
        }
        pipe = []
        pipe[0] = new Pipe();
        pipe[1] = new Pipe();
        pipe[1].x -= 180


        function draw(){
            ctx.drawImage(bg,pole_x-288,0)
            ctx.drawImage(bg,pole_x,0)
            pole_x -=0.5;
            if(pole_x == 0) pole_x = 288
            for(i=0; i<pipe.length; i++){
                ctx.drawImage(pu, pipe[i].x,pipe[i].y)
                ctx.drawImage(pb, pipe[i].x,pipe[i].y+pu.height+90)
                pipe[i].x -= 1;
                if(pipe[i].x == 0-pu.width) {
                    pipe[i].x = 288
                    pipe[i].y = Math.floor(Math.random() * (0 - -200 + 1)) + -200;
                }
            }
            ctx.drawImage(fg, 0,451)
            ctx.drawImage(bird, x,y)
            y = y+1.5


            if(y <= 0) {
                alert("You lose");
            }
            if(y >= 429) {
                alert("You lose");
            }

            requestAnimationFrame(draw)
        }
        pu.onload = draw;
        canvas.addEventListener('click' ,function(e) {
            y=y-40
                })

    </script>
</body>
</html>